// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Vault {
  id                Int      @id @default(autoincrement())
  name              String
  maxRedeem         Int      @default(0)                    @map("max_redeem")
  redeemedNum       Int      @default(0)                    @map("redeemed_num")
  isRandomGive      Boolean                                 @map("is_random_give")
  vaultType         Int      @default(0)                    @map("vault_type")
  minValue          Float                                   @map("min_value")
  maxValue          Float                                   @map("max_value")
  fixedValue        Float                                   @map("fixed_value")
  dividedValue      Int      @default(1)                    @map("divided_value")
  encryptedMnemonic String                                  @map("encrypted_mnemonic")
  totalRedeem       BigInt   @default(0)                    @map("total_redeem")
  createdAt         DateTime @default(now())                @map("created_at")
  updatedAt         DateTime @default(now())                @map("updated_at")
  expiryAt          DateTime?                               @map("expiry_at")
  country           String?                                 @map("country")
  isFamilyFriendly  Boolean                                 @map("is_family_friendly")
  redeems           Redeem[]

  @@map("vault")
}

model Redeem {
  id            Int      @id @default(autoincrement())
  ipaddress     String                                 @map("ip_address")
  transactionId String                                 @map("transaction_id")
  createdAt     DateTime @default(now())               @map("created_at")
  updatedAt     DateTime @default(now())               @map("updated_at")
  redeemAddress String                                 @map("redeem_address")
  amount        BigInt                                 @map("amount")
  vault         Vault    @relation(fields: [vaultId], references: [id])
  vaultId       Int                                    @map("vault_id")

  @@map("redeem")
}
