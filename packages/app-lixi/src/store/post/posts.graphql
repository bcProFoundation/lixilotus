# import PostOrder from '/packages/app-lixi-api/schema.graphql'
# import PageInfoFields from '../../graphql/fragments/page-info-fields.fragment.graphql'
# import PostMeiliPageInfoFields from '../../graphql/fragments/page-info-fields.fragment.graphql'

query Post($id: String!) {
  post(id: $id) {
    ...PostFields
  }
}

query Posts(
  $after: String
  $before: String
  $first: Int = 20
  $last: Int
  $orderBy: PostOrder
  $query: String
  $skip: Int
  $minBurnFilter: Int
) {
  allPosts(
    after: $after
    before: $before
    first: $first
    last: $last
    orderBy: $orderBy
    query: $query
    skip: $skip
    minBurnFilter: $minBurnFilter
  ) {
    totalCount
    edges {
      cursor
      node {
        ...PostFields
      }
    }
    pageInfo {
      ...PageInfoFields
    }
  }
}

query OrphanPosts(
  $after: String
  $before: String
  $first: Int = 20
  $last: Int
  $orderBy: PostOrder
  $query: String
  $skip: Int
  $minBurnFilter: Int
) {
  allOrphanPosts(
    after: $after
    before: $before
    first: $first
    last: $last
    orderBy: $orderBy
    query: $query
    skip: $skip
    minBurnFilter: $minBurnFilter
  ) {
    totalCount
    edges {
      cursor
      node {
        ...PostFields
      }
    }
    pageInfo {
      ...PageInfoFields
    }
  }
}

query PostsByPageId(
  $after: String
  $before: String
  $first: Int = 20
  $last: Int
  $orderBy: PostOrder
  $id: String
  $skip: Int
  $minBurnFilter: Int
) {
  allPostsByPageId(
    after: $after
    before: $before
    first: $first
    last: $last
    orderBy: $orderBy
    id: $id
    skip: $skip
    minBurnFilter: $minBurnFilter
  ) {
    totalCount
    edges {
      cursor
      node {
        ...PostFields
      }
    }
    pageInfo {
      ...PageInfoFields
    }
  }
}

query PostsByUserId(
  $after: String
  $before: String
  $first: Int = 20
  $last: Int
  $orderBy: PostOrder
  $id: String
  $skip: Int
  $minBurnFilter: Int
) {
  allPostsByUserId(
    after: $after
    before: $before
    first: $first
    last: $last
    orderBy: $orderBy
    id: $id
    skip: $skip
    minBurnFilter: $minBurnFilter
  ) {
    totalCount
    edges {
      cursor
      node {
        ...PostFields
      }
    }
    pageInfo {
      ...PageInfoFields
    }
  }
}

query PostsByTokenId(
  $after: String
  $before: String
  $first: Int = 20
  $last: Int
  $orderBy: PostOrder
  $id: String
  $skip: Int
  $minBurnFilter: Int
) {
  allPostsByTokenId(
    after: $after
    before: $before
    first: $first
    last: $last
    orderBy: $orderBy
    id: $id
    skip: $skip
    minBurnFilter: $minBurnFilter
  ) {
    totalCount
    edges {
      cursor
      node {
        ...PostFields
      }
    }
    pageInfo {
      ...PageInfoFields
    }
  }
}

query PostsBySearch($after: String, $before: String, $first: Int, $last: Int, $query: String, $minBurnFilter: Int) {
  allPostsBySearch(
    after: $after
    before: $before
    first: $first
    last: $last
    query: $query
    minBurnFilter: $minBurnFilter
  ) {
    edges {
      cursor
      node {
        ...PostMeiliFields
      }
    }
    pageInfo {
      ...PostMeiliPageInfoFields
    }
  }
}

fragment PostFields on Post {
  id
  content
  uploads {
    id
    upload {
      id
      sha
      bucket
      width
      height
    }
  }
  postAccount {
    address
    id
    name
  }
  pageAccount {
    address
    id
    name
  }
  page {
    avatar
    name
    id
  }
  token {
    id
    name
    tokenId
  }
  lotusBurnUp
  lotusBurnDown
  lotusBurnScore
  createdAt
  updatedAt
}

fragment PostMeiliFields on Post {
  id
  content
  uploads {
    id
    upload {
      id
      sha
      bucket
      width
      height
    }
  }
  postAccount {
    address
    id
    name
  }
  pageAccount {
    address
    id
    name
  }
  page {
    avatar
    name
    id
  }
  lotusBurnUp
  lotusBurnDown
  lotusBurnScore
  createdAt
  updatedAt
}

mutation createPost($input: CreatePostInput!) {
  createPost(data: $input) {
    ...PostFields
  }
}

mutation updatePost($input: UpdatePostInput!) {
  updatePost(data: $input) {
    ...PostFields
  }
}
